{"version":3,"file":"JsonViewer.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils.ts","../src/stateChange.ts","../src/keyboardNavigation.ts","../src/JsonViewer.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","import { ComplexAttributeConverter } from 'lit';\nimport { JsonViewerState, SupportedTypes } from './types';\n\nexport function isRegex(obj: RegExp | any): boolean {\n    return obj instanceof RegExp;\n}\n\nexport function getType(obj: any): SupportedTypes {\n    return obj === null\n        ? SupportedTypes.Null\n        : Array.isArray(obj)\n        ? SupportedTypes.Array\n        : (obj!.constructor.name.toLowerCase() as SupportedTypes);\n}\n\nexport function isPrimitive(obj: any): boolean {\n    return obj !== Object(obj);\n}\n\nexport function isNode(obj: any): boolean {\n    return !!obj && !!(obj as Node).nodeType;\n}\n\nexport function isPrimitiveOrNode(obj: any): boolean {\n    return isPrimitive(obj) || isNode(obj);\n}\n\nexport function generateNodePreview(\n    node: any,\n    { nodeCount = 3, maxLength = 15 }: { nodeCount?: number; maxLength?: number } = {}\n): string {\n    const isArray = Array.isArray(node);\n    const objectNodes = Object.keys(node);\n    const keys = objectNodes.slice(0, nodeCount);\n    const preview = [];\n\n    const getNodePreview = (nodeValue: any) => {\n        const nodeType = getType(nodeValue);\n\n        switch (nodeType) {\n            case SupportedTypes.Object:\n                return Object.keys(nodeValue).length === 0 ? '{ }' : '{ ... }';\n            case SupportedTypes.Array:\n                return nodeValue.length === 0 ? '[ ]' : '[ ... ]';\n            case SupportedTypes.String:\n                return `\"${nodeValue.substring(0, maxLength)}${nodeValue.length > maxLength ? '...' : ''}\"`;\n            default:\n                return String(nodeValue);\n        }\n    };\n\n    const childPreviews = [];\n    for (const key of keys) {\n        const nodePreview = [];\n        const nodeValue = node[key];\n\n        if (!isArray) nodePreview.push(`${key}: `);\n\n        nodePreview.push(getNodePreview(nodeValue));\n        childPreviews.push(nodePreview.join(''));\n    }\n\n    if (objectNodes.length > nodeCount) {\n        childPreviews.push('...');\n    }\n    preview.push(childPreviews.join(', '));\n\n    const previewText = preview.join('');\n\n    return isArray ? `[ ${previewText} ]` : `{ ${previewText} }`;\n}\n\nexport function* deepTraverse(obj: any): Generator<[any, string, string[]]> {\n    const stack: Array<[any, string, string[]]> = [[obj, '', []]];\n\n    while (stack.length) {\n        const [node, path, parents] = stack.shift()!;\n\n        if (path) {\n            yield [node, path, parents];\n        }\n\n        if (!isPrimitive(node)) {\n            for (const [key, value] of Object.entries(node)) {\n                stack.push([value, `${path}${path ? '.' : ''}${key}`, [...parents, path]]);\n            }\n        }\n    }\n}\n\n/**\n * Matches a string using a glob-like syntax)\n */\nexport function checkGlob(str: string, glob: string): boolean {\n    const strParts = str.split('.');\n    const globaParts = glob.split('.');\n\n    const isStar = (s: string) => s === '*';\n    const isGlobStar = (s: string) => s === '**';\n\n    let strIndex = 0;\n    let globIndex = 0;\n\n    while (strIndex < strParts.length) {\n        const globPart = globaParts[globIndex];\n        const strPart = strParts[strIndex];\n\n        if (globPart === strPart || isStar(globPart)) {\n            globIndex++;\n            strIndex++;\n        } else if (isGlobStar(globPart)) {\n            globIndex++;\n            strIndex = strParts.length - (globaParts.length - globIndex);\n        } else {\n            return false;\n        }\n    }\n\n    return globIndex === globaParts.length;\n}\n\nexport const JSONConverter: ComplexAttributeConverter = {\n    fromAttribute: (value: string): any => {\n        return value && value.trim() ? JSON.parse(value) : undefined;\n    },\n    toAttribute: (value: any): string => {\n        return JSON.stringify(value);\n    }\n};\n\nexport const isDefined = (value: any): boolean => value !== void 0;\n\nexport const isMatchingPath = (path: string, criteria: string | RegExp) =>\n    isRegex(criteria) ? !!path.match(criteria as RegExp) : checkGlob(path, criteria as string);\n\nexport const isExpanded = (path: string, state: JsonViewerState): boolean => state.expanded[path];\n\nexport const isCollapsed = (path: string, state: JsonViewerState): boolean => !state.expanded[path];\n\nexport const isDeepestVisible = (node: Element): boolean => {\n    const elementToCheck = node.querySelector('[part=object]');\n    if (!elementToCheck) return true;\n    return ![...node.children].includes(elementToCheck);\n};\n\nexport const isAncestor = (currentElement: Element, compareElement: Element): boolean => {\n    const currentPath = currentElement.getAttribute('data-path') || '';\n    const comparePath = compareElement.getAttribute('data-path') || '';\n    return currentPath.startsWith(comparePath) && currentElement.parentElement !== compareElement.parentElement;\n};\n\nexport const isExpandedAndNonPrimitive = (path: string, shadowRoot: ShadowRoot): boolean => {\n    const currentFocus = shadowRoot.querySelector(`[data-path=\"${path}\"]`);\n    const nextObject = currentFocus?.querySelector('[part=object]');\n    if (!currentFocus || !nextObject) return false;\n    return [...currentFocus.children].includes(nextObject);\n};\n\nexport const isEmptyObject = (currentFocus: Element) => {\n    const nestedIterable = currentFocus.querySelector('[part=object]');\n    return !nestedIterable?.children || nestedIterable.children.length === 0;\n};\n\nexport const isTopLevelElement = (path: string, shadowRoot: ShadowRoot): boolean => {\n    const key = shadowRoot.querySelector(`[data-path=\"${path}\"]`)?.querySelector('[part=key]');\n    if (!(key instanceof HTMLElement)) return false;\n    if (key.innerText.includes('.')) {\n        const textPeriodCount = key.innerText.split('').filter((char) => char === '.').length;\n        const pathPeriodCount = path.split('').filter((char) => char === '.').length;\n        return textPeriodCount === pathPeriodCount;\n    } else {\n        return !path.includes('.');\n    }\n};\n\nexport const canNavigateDown = (path: string, shadowRoot: ShadowRoot): boolean => {\n    const currentFocus = shadowRoot.querySelector(`[data-path=\"${path}\"]`);\n    const nextObject = currentFocus?.querySelector('[part=object]');\n    if (!currentFocus || !nextObject) return false;\n    return [...currentFocus.children].includes(nextObject) && !isEmptyObject(currentFocus);\n};\n","import { JsonViewerState } from './types';\nimport { deepTraverse, isDefined, isMatchingPath } from './utils';\n\nexport const toggleNode =\n    (path: string, expanded?: boolean) =>\n    (state: JsonViewerState): Partial<JsonViewerState> => ({\n        expanded: {\n            ...state.expanded,\n            [path]: isDefined(expanded) ? !!expanded : !state.expanded[path]\n        }\n    });\n\nexport const expand =\n    (regexOrGlob: string | RegExp, isExpanded: boolean) =>\n    (_state: JsonViewerState, el: any): Partial<JsonViewerState> => {\n        const expanded: Record<string, boolean> = {};\n\n        if (regexOrGlob) {\n            for (const [, path, parents] of deepTraverse(el.data)) {\n                if (isMatchingPath(path, regexOrGlob)) {\n                    expanded[path] = isExpanded;\n                    parents.forEach((p: string) => (expanded[p] = isExpanded));\n                }\n            }\n        }\n\n        return { expanded };\n    };\n\nexport const collapseSingleNode =\n    (path: string) =>\n    (state: JsonViewerState): Partial<JsonViewerState> => ({\n        expanded: {\n            ...state.expanded,\n            [path]: false\n        }\n    });\n\nexport const expandSingleNode =\n    (path: string) =>\n    (state: JsonViewerState): Partial<JsonViewerState> => ({\n        expanded: {\n            ...state.expanded,\n            [path]: true\n        }\n    });\n\nexport const filter =\n    (regexOrGlob: string | RegExp) =>\n    (_state: JsonViewerState, el: any): Partial<JsonViewerState> => {\n        const filtered: Record<string, boolean> = {};\n\n        if (regexOrGlob) {\n            for (const [, path, parents] of deepTraverse(el.data)) {\n                if (isMatchingPath(path, regexOrGlob)) {\n                    filtered[path] = false;\n                    parents.forEach((p: string) => (filtered[p] = false));\n                } else {\n                    filtered[path] = true;\n                }\n            }\n        }\n\n        return { filtered };\n    };\n\nexport const resetFilter = () => (): Partial<JsonViewerState> => ({ filtered: {} });\n\nexport const highlight = (path: string | null) => (): Partial<JsonViewerState> => ({\n    highlight: path\n});\n","import { isDeepestVisible, isAncestor, isEmptyObject } from './utils';\n\nfunction findLastVisibleDescendant(node: Element): Element {\n    if (isDeepestVisible(node)) return node;\n    const deeperObject = node.querySelector('[part=object]');\n    const nextDeepest = deeperObject?.lastElementChild;\n    if (!nextDeepest) return node;\n    return findLastVisibleDescendant(nextDeepest);\n}\n\nfunction findNearestParentWithAdditionalLeaves(node: Element, initial = node): Element | null {\n    const ul = node.parentElement;\n    if (!ul) return node;\n    const parent = ul.parentElement;\n    if (!parent || !parent.parentElement) return initial;\n    if (isLastChild(parent)) {\n        return findNearestParentWithAdditionalLeaves(parent, initial);\n    } else {\n        return parent.nextElementSibling;\n    }\n}\n\nexport const navigateUp = (path: string, shadowRoot: ShadowRoot): void => {\n    const currentFocus = shadowRoot.querySelector(`[data-path=\"${path}\"]`);\n    if (!currentFocus) return;\n    const possibleNewFocus = currentFocus.previousElementSibling || currentFocus.parentElement?.parentElement;\n    if (!(possibleNewFocus instanceof Element)) return;\n    const newFocus =\n        !isDeepestVisible(possibleNewFocus) && !isAncestor(currentFocus, possibleNewFocus)\n            ? findLastVisibleDescendant(possibleNewFocus)\n            : possibleNewFocus;\n    if (newFocus) changeFocusedKey(newFocus, currentFocus);\n};\n\nexport const navigateDown = (path: string, shadowRoot: ShadowRoot): void => {\n    const currentFocus = shadowRoot.querySelector(`[data-path=\"${path}\"]`);\n    if (!currentFocus) return;\n    const newFocus = findNextElementToFocus(currentFocus);\n    if (newFocus) changeFocusedKey(newFocus, currentFocus);\n};\n\nconst findNextElementToFocus = (currentFocus: Element): Element | null => {\n    if (!isDeepestVisible(currentFocus)) {\n        if (isEmptyObject(currentFocus)) {\n            return findNearestParentWithAdditionalLeaves(currentFocus);\n        } else {\n            return currentFocus.querySelector('[part=property]');\n        }\n    } else if (isLastChild(currentFocus)) {\n        return findNearestParentWithAdditionalLeaves(currentFocus) || currentFocus;\n    } else return currentFocus.nextElementSibling;\n};\n\nexport const navigateToParent = (path: string, shadowRoot: ShadowRoot): void => {\n    const currentFocus = shadowRoot.querySelector(`[data-path=\"${path}\"]`);\n    if (!currentFocus || !currentFocus.parentElement || !currentFocus.parentElement.parentElement) return;\n    changeFocusedKey(currentFocus.parentElement.parentElement, currentFocus);\n};\n\nconst changeFocusedKey = (newFocus: Element, oldFocus: Element): void => {\n    const keyToFocus = newFocus.querySelector('[part=key]');\n    const keyToBlur = oldFocus.querySelector('[part=key]');\n    if (keyToBlur instanceof HTMLSpanElement && keyToFocus instanceof HTMLSpanElement) {\n        keyToFocus.setAttribute('tabindex', '0');\n        keyToBlur.setAttribute('tabindex', '-1');\n        keyToFocus.focus();\n    }\n};\n\nconst isLastChild = (currentFocus: Element): boolean => !currentFocus.nextElementSibling;\n","import { html, LitElement, TemplateResult } from 'lit';\nimport { property, state } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\n\nimport {\n    getType,\n    isPrimitiveOrNode,\n    generateNodePreview,\n    isNode,\n    deepTraverse,\n    JSONConverter,\n    isDefined,\n    isCollapsed,\n    isExpandedAndNonPrimitive,\n    isTopLevelElement,\n    canNavigateDown\n} from './utils';\nimport {\n    toggleNode,\n    expand,\n    filter,\n    highlight,\n    resetFilter,\n    collapseSingleNode,\n    expandSingleNode\n} from './stateChange';\nimport { navigateDown, navigateUp, navigateToParent } from './keyboardNavigation';\n\nimport styles from './styles.css';\nimport { JsonViewerState, Primitive } from './types';\n\n/**\n * @since 1.0\n *\n * @csspart object - The object wrapper element.\n * @csspart property - The wrapper element of a property.\n * @csspart key - The key element of a property.\n * @csspart primitive - The primitive value.\n * @csspart primitive--string - Applied when the primitive is a string.\n * @csspart primitive--number - Applied when the primitive is a number.\n * @csspart primitive--boolean - Applied when the primitive is a boolean.\n * @csspart primitive--null - Applied when the primitive is a null.\n * @csspart preview - The value preview of a property.\n * @csspart highlight - The highlighted value.\n *\n * @cssproperty [--background-color] - The component background color.\n * @cssproperty [--color] - The text color.\n * @cssproperty [--font-family] - The font family.\n * @cssproperty [--font-size] - The font size.\n * @cssproperty [--indent-size] - The size of the indentation of nested properties.\n * @cssproperty [--indentguide-size] - The width of the indentation line.\n * @cssproperty [--indentguide-style] - The style of the indentation line.\n * @cssproperty [--indentguide-color] - The color of the indentation line.\n * @cssproperty [--indentguide-color-active] - The color of the indentation line when is active.\n * @cssproperty [--indentguide]\n * @cssproperty [--indentguide-active]\n * @cssproperty [--string-color] - The color of a string type value\n * @cssproperty [--number-color] - The color of a number type value\n * @cssproperty [--boolean-color] - The color of a boolean type value\n * @cssproperty [--null-color] - The color of a null type value\n * @cssproperty [--property-color] - The color of the property key.\n * @cssproperty [--preview-color] - The color of the collapsed property preview.\n * @cssproperty [--highlight-color] - The color of the highlighted value.\n */\nexport class JsonViewer extends LitElement {\n    static styles = [styles];\n\n    @property({ converter: JSONConverter, type: Object })\n    data?: any;\n\n    @state() private state: JsonViewerState = {\n        expanded: {},\n        filtered: {},\n        highlight: null\n    };\n\n    private async setState(stateFn: (state: JsonViewerState, el: JsonViewer) => Partial<JsonViewerState>) {\n        const currentState = this.state;\n\n        this.state = {\n            ...currentState,\n            ...stateFn(currentState, this)\n        };\n    }\n\n    connectedCallback() {\n        if (!this.hasAttribute('data') && !isDefined(this.data)) {\n            this.setAttribute('data', this.innerText);\n        }\n\n        this.addEventListener('keydown', this.handleKeyDown);\n\n        super.connectedCallback();\n    }\n\n    handlePropertyClick = (path: string) => (e: Event) => {\n        e.preventDefault();\n\n        this.setState(toggleNode(path));\n    };\n\n    handleKeyDown = (event: KeyboardEvent) => {\n        if (!this.shadowRoot) return;\n        const path = this.shadowRoot.activeElement?.parentElement?.getAttribute('data-path');\n        if (!path) return;\n        switch (event.code) {\n            case 'ArrowUp':\n                event.preventDefault();\n                navigateUp(path, this.shadowRoot);\n                break;\n            case 'ArrowDown':\n                event.preventDefault();\n                navigateDown(path, this.shadowRoot);\n                break;\n            case 'ArrowLeft':\n                event.preventDefault();\n                if (isExpandedAndNonPrimitive(path, this.shadowRoot)) this.setState(collapseSingleNode(path));\n                else if (!isTopLevelElement(path, this.shadowRoot)) navigateToParent(path, this.shadowRoot);\n                break;\n            case 'ArrowRight':\n                event.preventDefault();\n                if (isCollapsed(path, this.state)) this.setState(expandSingleNode(path));\n                else if (canNavigateDown(path, this.shadowRoot)) {\n                    navigateDown(path, this.shadowRoot);\n                }\n                break;\n            default:\n                break;\n        }\n    };\n\n    expand(glob: string | RegExp) {\n        this.setState(expand(glob, true));\n    }\n\n    expandAll() {\n        this.setState(expand('**', true));\n    }\n\n    collapseAll() {\n        this.setState(expand('**', false));\n    }\n\n    collapse(glob: string | RegExp) {\n        this.setState(expand(glob, false));\n    }\n\n    *search(criteria: string) {\n        for (const [node, path] of deepTraverse(this.data)) {\n            if (isPrimitiveOrNode(node) && String(node).includes(criteria)) {\n                this.expand(path);\n                this.updateComplete.then(() => {\n                    const node = this.shadowRoot!.querySelector(`[data-path=\"${path}\"]`) as HTMLElement;\n                    node.scrollIntoView({\n                        behavior: 'smooth',\n                        inline: 'center',\n                        block: 'center'\n                    });\n\n                    node.focus();\n                });\n\n                this.setState(highlight(path));\n\n                yield {\n                    value: node,\n                    path\n                };\n            }\n        }\n\n        this.setState(highlight(null));\n    }\n\n    filter(criteria: string | RegExp) {\n        this.setState(filter(criteria));\n    }\n\n    resetFilter() {\n        this.setState(resetFilter());\n    }\n\n    renderObject(node: Record<string, unknown>, path: string, isRoot: boolean): TemplateResult {\n        return html`\n            <ul part=\"object\">\n                ${Object.keys(node).map((key, i) => {\n                    const nodeData = node[key];\n                    const nodePath = path ? `${path}.${key}` : key;\n                    const isPrimitive = isPrimitiveOrNode(nodeData);\n\n                    return html`\n                        <li part=\"property\" data-path=\"${nodePath}\" .hidden=\"${this.state.filtered[nodePath]}\">\n                            <span\n                                part=\"key\"\n                                tabindex=${isRoot && i === 0 ? '0' : '-1'}\n                                class=\"${classMap({\n                                    key: key,\n                                    collapsable: !isPrimitive,\n                                    collapsableCollapsed: !this.state.expanded[nodePath]\n                                })}\"\n                                @click=\"${!isPrimitive ? this.handlePropertyClick(nodePath) : null}\"\n                            >\n                                ${key}:\n                            </span>\n                            ${this.renderNode(nodeData, false, nodePath)}\n                        </li>\n                    `;\n                })}\n            </ul>\n        `;\n    }\n\n    renderNode(node: any, isRoot = false, path = '') {\n        const isPrimitive = isPrimitiveOrNode(node);\n        const isExpanded = !path || this.state.expanded[path] || isPrimitive;\n\n        if (isExpanded) {\n            return isPrimitive ? this.renderPrimitive(node, path) : this.renderObject(node, path, isRoot);\n        } else {\n            return this.renderNodePreview(node);\n        }\n    }\n\n    renderNodePreview(node: any) {\n        return html` <span part=\"preview\" class=\"preview\"> ${generateNodePreview(node)} </span> `;\n    }\n\n    renderPrimitive(node: Primitive | null, path: string) {\n        const highlight = this.state.highlight;\n        const nodeType = getType(node);\n        const value = isNode(node)\n            ? node\n            : html`\n                  <span part=\"primitive primitive-${nodeType}\" class=\"${getType(node)}\">${JSON.stringify(node)}</span>\n              `;\n\n        return path === highlight ? html`<mark part=\"highlight\">${value}</mark>` : value;\n    }\n\n    render() {\n        const data = this.data;\n\n        return isDefined(data) ? this.renderNode(data, true) : null;\n    }\n}\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","getType","obj","Array","isArray","constructor","name","toLowerCase","isPrimitive","isNode","nodeType","isPrimitiveOrNode","deepTraverse","stack","node","path","parents","shift","entries","push","JSONConverter","fromAttribute","trim","JSON","parse","undefined","toAttribute","stringify","isDefined","isMatchingPath","criteria","RegExp","match","str","glob","strParts","split","globaParts","isGlobStar","s","strIndex","globIndex","globPart","checkGlob","isDeepestVisible","elementToCheck","querySelector","children","includes","isEmptyObject","currentFocus","nestedIterable","expand","regexOrGlob","isExpanded","_state","el","expanded","data","forEach","p","highlight","findLastVisibleDescendant","deeperObject","nextDeepest","lastElementChild","findNearestParentWithAdditionalLeaves","initial","ul","parentElement","parent","isLastChild","nextElementSibling","navigateUp","shadowRoot","possibleNewFocus","previousElementSibling","_a","Element","newFocus","currentElement","compareElement","currentPath","getAttribute","comparePath","startsWith","isAncestor","changeFocusedKey","navigateDown","findNextElementToFocus","oldFocus","keyToFocus","keyToBlur","HTMLSpanElement","setAttribute","focus","JsonViewer","LitElement","this","state","filtered","handlePropertyClick","preventDefault","setState","assign","toggleNode","handleKeyDown","event","_b","activeElement","code","nextObject","isExpandedAndNonPrimitive","collapseSingleNode","HTMLElement","innerText","filter","char","isTopLevelElement","navigateToParent","isCollapsed","expandSingleNode","canNavigateDown","stateFn","currentState","connectedCallback","hasAttribute","addEventListener","super","expandAll","collapseAll","collapse","search","String","updateComplete","scrollIntoView","behavior","inline","block","resetFilter","renderObject","isRoot","html","keys","map","nodeData","nodePath","classMap","collapsable","collapsableCollapsed","renderNode","renderPrimitive","renderNodePreview","nodeCount","maxLength","objectNodes","slice","preview","getNodePreview","nodeValue","substring","childPreviews","nodePreview","join","previewText","generateNodePreview","render","styles","property","converter","type","prototype"],"mappings":"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"}